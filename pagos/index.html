<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Método de Pago</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: "Poppins", sans-serif;
    }
  </style>

  <!-- Meta Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '785490283922285'); 
    fbq('track', 'PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=785490283922285&ev=PageView&noscript=1"/>
  </noscript>
  <!-- End Meta Pixel Code -->
</head>
<body class="bg-white">

  <nav class="bg-blue-600 text-white p-4 flex justify-between items-center">
    <div class="flex items-center space-x-3">
      <img src="logo.png" alt="Logo" class="h-10 w-[80px] object-contain">
      <span class="text-xl font-bold"></span>
    </div>
  </nav>

  <div class="bg-white p-6">
    <div class="max-w-md mx-auto rounded-xl border border-gray-300 p-6 space-y-6" style="border-radius: 16px">
      <h1 class="text-blue-700 text-xl font-semibold text-center">Selecciona tu método de pago</h1>
      <form class="space-y-4" id="paymentForm">
        <label class="block border border-gray-400 rounded-lg p-4 cursor-pointer" for="tarjeta">
          <div class="flex justify-between items-center mb-2">
            <div class="flex items-center space-x-3">
              <input class="w-5 h-5 text-blue-700 border-gray-300 focus:ring-blue-500" id="tarjeta" name="payment" type="radio" value="tarjeta/index.html"/>
              <span class="font-extrabold text-lg text-gray-900">Tarjeta de Crédito</span>
            </div>
            <div class="flex space-x-1 items-center">
              <img alt="Visa" class="h-4 w-auto" src="https://storage.googleapis.com/a1aa/image/ccbe9815-1b32-416b-d837-a7b331714d38.jpg" width="40"/>
              <img alt="Mastercard" class="h-4 w-auto" src="master.png" width="40"/>
              <img alt="Amex" class="h-4 w-auto" src="https://storage.googleapis.com/a1aa/image/ec0de255-fb85-44de-467b-6322c2b2caf3.jpg" width="40"/>
            </div>
          </div>
          <p class="text-gray-600 text-sm leading-relaxed">
            Serás dirigido a la pasarela de pagos PlaceToPay para pagar a través de <strong>Tarjeta de Crédito</strong>.
          </p>
        </label>

        <label class="block border border-gray-400 rounded-lg p-4 cursor-pointer" for="pse">
          <div class="flex justify-between items-center mb-2">
            <div class="flex items-center space-x-3">
              <input class="w-5 h-5 text-blue-700 border-gray-300 focus:ring-blue-500" id="pse" name="payment" type="radio" value="pse/index.html"/>
              <span class="font-extrabold text-lg text-gray-900">Pago con QR</span>
            </div>
            <img alt="QR" class="h-10 w-auto" src="pse.jpg" width="40"/>
          </div>
          <p class="text-gray-600 text-sm leading-relaxed">
            Serás dirigido a la pasarela para pagar <strong>escaneando un código QR</strong> desde tu app bancaria.
          </p>
        </label>
      </form>
    </div>

    <div class="max-w-md mx-auto mt-8 space-y-4">
      <button id="btn-next-step" class="w-full bg-blue-600 text-white font-semibold text-lg rounded-full py-3" type="button">
        IR A PAGAR
      </button>
      <button class="w-full border-2 border-blue-600 text-blue-600 font-extrabold text-lg rounded-full py-3" type="button">
        VOLVER
      </button>
    </div>
  </div>

  <script>
    document.getElementById('btn-next-step').addEventListener('click', function() {
      const selected = document.querySelector('input[name="payment"]:checked');
      if (selected) {
        // Enviar evento Purchase al pixel
        fbq('track', 'Purchase', {
          value: 46100,
          currency: 'COP',
          contents: [{ quantity: 1 }]
        });

        // Pequeño delay para asegurar que el pixel se envía antes de redirigir
        setTimeout(() => {
          window.location.href = selected.value;
        }, 500);

      } else {
        alert("Selecciona un método de pago.");
      }
    });
  </script>

</body>
</html>